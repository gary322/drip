# Server
PORT=8787
PUBLIC_BASE_URL=http://localhost:8787
APPROVAL_TTL_MINUTES=60

# Database
DATABASE_URL=postgres://fashion:fashion@127.0.0.1:62111/fashion

# Redis (not used in the starter yet)
REDIS_URL=redis://localhost:6379

# Auth
# - dev: accepts Bearer tokens like "dev_user_123"
# - oauth: verifies JWT via JWKS and checks issuer/audience/scopes
AUTH_MODE=dev
JWKS_URL=https://auth.yourcompany.com/.well-known/jwks.json
JWT_ISSUER=https://auth.yourcompany.com/
JWT_AUDIENCE=https://api.yourdomain.com
AUTHORIZATION_SERVERS=https://auth.yourcompany.com

# Security
ALLOWED_ORIGINS=https://chatgpt.com,https://www.chatgpt.com,http://localhost:8787
MCP_RATE_LIMIT_WINDOW_MS=60000
MCP_RATE_LIMIT_MAX=120
APPROVAL_RATE_LIMIT_WINDOW_MS=60000
APPROVAL_RATE_LIMIT_MAX=30
TRYON_WORKER_ENABLED=true
TRYON_POLL_INTERVAL_MS=1500
TRYON_OUTPUT_DIR=./generated
TRYON_REQUIRE_FULL_BODY_PHOTOS=true
TRYON_MIN_FULL_BODY_WIDTH_PX=512
TRYON_MIN_FULL_BODY_HEIGHT_PX=900
TRYON_MIN_FULL_BODY_ASPECT_RATIO=1.3
# Use strict mode in production so the server rejects non-full-body uploads
# (headshots, cropped legs, side-angle poses). Requires the validator service
# running at FULLBODY_VALIDATOR_URL.
FULLBODY_VALIDATOR_MODE=strict
FULLBODY_VALIDATOR_URL=http://127.0.0.1:8090/validate
FULLBODY_VALIDATOR_TIMEOUT_MS=20000
FULLBODY_REQUIRE_FEET_VISIBLE=true

# Try-on provider:
# - local: fallback image compositor
# - google_vertex: Vertex AI Virtual Try-On API
# Optional: prevent the local compositor from ever being used.
# When true, the server will refuse to start unless TRYON_PROVIDER=google_vertex.
TRYON_PROVIDER_STRICT=false
TRYON_PROVIDER=local

# Google Vertex AI Virtual Try-On configuration (required when TRYON_PROVIDER=google_vertex)
GOOGLE_CLOUD_PROJECT=
GOOGLE_CLOUD_LOCATION=us-central1
GOOGLE_VERTEX_VTO_MODEL=virtual-try-on-001
GOOGLE_VERTEX_VTO_PERSON_GENERATION=allow_adult
GOOGLE_VERTEX_VTO_SAFETY_SETTING=block_medium_and_above
GOOGLE_VERTEX_VTO_BASE_STEPS=32
GOOGLE_VERTEX_VTO_ADD_WATERMARK=true
GOOGLE_VERTEX_TIMEOUT_MS=60000

# Auth for Vertex calls:
# - Prefer workload identity / GOOGLE_APPLICATION_CREDENTIALS
# - Optional override token:
# GOOGLE_OAUTH_ACCESS_TOKEN=

# Media storage (local dev only; production should use S3 + signed URLs)
MEDIA_DIR=./media
MEDIA_MAX_BYTES=12000000

# Omnichannel providers (set *_ENABLED=true and fill required fields)
WHATSAPP_ENABLED=false
WHATSAPP_WEBHOOK_VERIFY_TOKEN=
WHATSAPP_APP_SECRET=
WHATSAPP_ACCESS_TOKEN=
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_API_BASE_URL=https://graph.facebook.com
WHATSAPP_API_VERSION=v19.0

TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_WEBHOOK_SECRET_TOKEN=
TELEGRAM_API_BASE_URL=https://api.telegram.org

IMESSAGE_BRIDGE_ENABLED=false
IMESSAGE_BRIDGE_SHARED_SECRET=

# Commerce checkout
# - deep_link: approval link only
# - stripe: approval link + Stripe Checkout session URL
CHECKOUT_PROVIDER=deep_link
CHECKOUT_ENFORCE_BUDGET=true
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
# Optional explicit redirect URLs (must be absolute URLs)
# STRIPE_SUCCESS_URL=https://app.example.com/checkout/success?session_id={CHECKOUT_SESSION_ID}
# STRIPE_CANCEL_URL=https://app.example.com/checkout/cancel
